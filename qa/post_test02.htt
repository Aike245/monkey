################################################################################
# DESCRIPTION
#	An incomplete POST request.
#
# AUTHOR
#	Carlos Ghan	<charlie.brown.uy@gmail.com>
#
# DATE
#	June 29 2009
#
# COMMENTS
# 	A POST request with missing Content-Length.(Should return "Length Required")
################################################################################

# Why post_test02.htt sometimes fail ?
# ------------------------------------
# Sometimes this test fails, because httest send the whole data by parts, so when
# Monkey read the first part including headers and a part of body, if a 
# content-length header doesn't exists, Monkey doesn't wait for the whole request
# and send the error 411, sometimes httest cannot handle this information as it is 
# in writting mode.

INCLUDE __CONFIG

CLIENT
_REQ $HOST $PORT 
__POST / $HTTPVER
__Host: $HOST
__Content-Type: text/plain
__Connection: close
__
_-someVariable=1234&daemon=monkeyd&SESSION=e1d83283d597ca88f599e34c8ef2e8c3
_EXPECT . "HTTP/1.1 411 Length Required"
_WAIT
END
